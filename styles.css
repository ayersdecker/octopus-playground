:root{
  --bg:#0f1724;
  --card:#0b1220;
  --accent:#7b3df2;
  --muted:#9aa4b2;
  --sea-1: #071428;
  --sea-2: #042037;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%;width:100%}

body{
  font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;
  background:linear-gradient(180deg,var(--sea-1) 0%, var(--sea-2) 100%);
  color:#e6eef7;
  position:relative;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  -webkit-overflow-scrolling:touch;
}

body::before{
  content:'';
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:radial-gradient(circle at 20% 50%, rgba(123,61,242,0.04) 0%, transparent 50%),
             radial-gradient(circle at 80% 80%, rgba(91,255,215,0.03) 0%, transparent 50%);
  pointer-events:none;
  z-index:-1;
}

/* ambient background - subtle on mobile */
.ambient-bg{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;overflow:hidden}

.ambient-fish{position:absolute;opacity:0.08;animation:driftAcross linear infinite;top:var(--offset, 20%)}
.fish-small{width:40px;height:20px}
.fish-medium{width:50px;height:25px}
.fish-large{width:60px;height:30px}

@keyframes driftAcross{0%{left:-100px}100%{left:100vw}}
.ambient-fish{animation-duration:var(--duration, 20s);animation-delay:var(--delay, 0s)}

.ambient-seaweed{position:absolute;bottom:0;opacity:0.05;top:auto;height:80px}
.ambient-seaweed{animation-duration:var(--duration, 26s);animation-delay:var(--delay, 1s)}

.ambient-particle{position:absolute;width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,0.2);opacity:0.05;animation:particleFloat ease-in-out infinite}
@keyframes particleFloat{0%{bottom:-10px;opacity:0.05}100%{bottom:100vh;opacity:0}}
.ambient-particle{animation-duration:var(--duration, 8s);animation-delay:var(--delay, 0s)}

/* main app - full mobile single column */
.app{
  flex:1;
  display:flex;
  flex-direction:column;
  width:100%;
  height:100vh;
  max-width:100%;
  margin:0;
  padding:0;
  gap:8px;
  z-index:1;
  overflow:hidden;
  padding-top:max(6px, env(safe-area-inset-top));
  padding-bottom:max(6px, env(safe-area-inset-bottom));
}

header{
  text-align:center;
  margin:0;
  padding:0;
  flex-shrink:0;
}

header h1{
  margin:0;
  font-size:20px;
  font-weight:700;
  line-height:1.2;
  background:linear-gradient(135deg, #ffffff, #c4b5fd);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  filter:drop-shadow(0 2px 8px rgba(123,61,242,0.3));
}

.tag{
  margin:4px 0 0 0;
  color:var(--muted);
  font-size:11px;
  line-height:1.3;
}

/* game section - single column */
.game{
  display:flex;
  flex-direction:column;
  gap:0;
  flex:1;
  width:100%;
  overflow:hidden;
  min-height:0;
}

/* octopus container - mobile sized */
.octopus-container{
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  flex:1;
  position:relative;
  padding:20px;
  overflow:visible;
  min-height:0;
}

.octopus-wrapper{
  width:90vw;
  height:90vw;
  max-width:500px;
  max-height:500px;
  position:relative;
  background:radial-gradient(circle at center, rgba(123,61,242,0.08), transparent 70%);
  border-radius:50%;
  padding:20px;
  box-shadow:0 8px 32px rgba(123,61,242,0.15), inset 0 0 20px rgba(123,61,242,0.05);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
}

.octopus{
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  max-width:100%;
  max-height:100%;
}

.octopus svg{
  width:100%;
  height:100%;
  transition:transform 300ms ease;
  filter:drop-shadow(0 4px 8px rgba(123,61,242,0.2));
  display:block;
}

.octopus.wiggle svg{
  animation:wiggle 600ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes wiggle{
  0%{transform:rotate(-8deg) scale(0.98)}
  25%{transform:rotate(8deg) scale(1.02)}
  50%{transform:rotate(-6deg) scale(1)}
  75%{transform:rotate(5deg) scale(1.01)}
  100%{transform:rotate(0) scale(1)}
}


/* eye animations */
.eye{transition:all 300ms ease}
.eye .pupil{transition:all 200ms ease}
.eye-shine{animation:sparkle 2.5s ease-in-out infinite}
@keyframes sparkle{0%,100%{opacity:0.8}50%{opacity:0.3}}

/* tentacle animations */
.tent-wrapper{transition:transform 800ms cubic-bezier(0.34, 1.56, 0.64, 1)}
.tent{stroke-linecap:round;stroke-linejoin:round;transition:all 200ms ease}

/* Clickable tentacles hover and active states */
.tent-clickable{
  cursor:pointer !important;
  touch-action:manipulation;
}
.tent-clickable:hover .tent{
  filter:brightness(1.3) drop-shadow(0 0 8px rgba(255,255,255,0.4));
  stroke-width:10;
}
.tent-clickable.tent-active .tent{
  filter:brightness(1.5) drop-shadow(0 0 12px rgba(255,255,255,0.6));
  animation:tentPulse 300ms ease-out;
}

/* Increase tap target area for tentacles */
.tent-clickable .tent{
  stroke-width:12;
}

@keyframes tentPulse{
  0%{stroke-width:12}
  50%{stroke-width:16}
  100%{stroke-width:12}
}

.tent-1{animation:tentSway1 4s ease-in-out infinite}
.tent-2{animation:tentSway2 4.2s ease-in-out infinite}
.tent-3{animation:tentSway3 4.4s ease-in-out infinite}
.tent-4{animation:tentSway2 4.2s ease-in-out infinite}
.tent-5{animation:tentSway1 4s ease-in-out infinite}
.tent-6{animation:tentSway3 4.4s ease-in-out infinite}
.tent-7{animation:tentSway1 4s ease-in-out infinite}
.tent-8{animation:tentSway2 4.2s ease-in-out infinite}

@keyframes tentSway1{0%{transform:rotate(-2deg)}50%{transform:rotate(4deg)}100%{transform:rotate(-2deg)}}
@keyframes tentSway2{0%{transform:rotate(0deg)}50%{transform:rotate(6deg)}100%{transform:rotate(0deg)}}
@keyframes tentSway3{0%{transform:rotate(2deg)}50%{transform:rotate(5deg)}100%{transform:rotate(2deg)}}

/* floating animation */
.octopus-svg{animation:floating 3.5s ease-in-out infinite}
@keyframes floating{0%,100%{transform:translateY(0px)}50%{transform:translateY(-8px)}}

.suction-cups{animation:suctionPulse 2s ease-in-out infinite}
@keyframes suctionPulse{0%,100%{opacity:0.6}50%{opacity:0.9}}

/* bubbles */
.bubbles{position:absolute;pointer-events:none;top:60px;width:100%;height:100%;overflow:hidden}
.bubble{position:absolute;border-radius:50%;background:rgba(255,255,255,0.08);backdrop-filter:blur(2px);box-shadow:inset -1px -1px 3px rgba(0,0,0,0.2);animation:bubble 1600ms linear forwards}
@keyframes bubble{0%{transform:translateY(0) scale(0.6);opacity:0.6}100%{transform:translateY(-100px) scale(1.1);opacity:0}}

/* progress bars */
.stat{display:flex;flex-direction:column;gap:5px}
.stat .label{display:flex;justify-content:space-between;color:var(--muted);font-size:12px;font-weight:500}
.bar{height:10px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden}
.fill{height:100%;width:0%;background:linear-gradient(90deg,#ffb199,#7b3df2);transition:width 400ms ease}
.stat.small{font-size:12px;color:var(--muted);font-weight:500}

/* panel - full width controls */
.panel{
  width:100%;
  display:flex;
  flex-direction:column;
  gap:10px;
  background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  padding:12px;
  border-radius:0;
  box-shadow:0 -4px 24px rgba(2,6,20,0.7), 0 0 0 1px rgba(255,255,255,0.05);
  flex-shrink:0;
  overflow:hidden;
  backdrop-filter:blur(10px);
  margin-top:auto;
}

/* Music section styling */
.music-section{
  background:linear-gradient(135deg, rgba(123,61,242,0.15), rgba(91,255,215,0.1));
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(123,61,242,0.3);
  box-shadow:0 4px 12px rgba(123,61,242,0.1);
  flex-shrink:0;
}

.music-header{
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:5px;
  font-size:14px;
  font-weight:600;
}

.music-icon{
  font-size:18px;
  animation:musicPulse 2s ease-in-out infinite;
}

@keyframes musicPulse{
  0%, 100%{transform:scale(1)}
  50%{transform:scale(1.15)}
}

.music-hint{
  margin:0;
  font-size:11px;
  color:rgba(255,255,255,0.7);
  font-style:italic;
}

.icon-btn{
  margin-left:auto;
  background:rgba(255,255,255,0.1);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:6px;
  padding:4px 8px;
  font-size:14px;
  cursor:pointer;
  transition:all 200ms ease;
  min-width:36px;
  height:28px;
  -webkit-tap-highlight-color:transparent;
  touch-action:manipulation;
}

.icon-btn:hover{
  background:rgba(255,255,255,0.15);
  transform:scale(1.05);
}

.icon-btn:active{
  transform:scale(0.95);
}

.icon-btn.muted{
  background:rgba(255,0,0,0.1);
  border-color:rgba(255,100,100,0.3);
}

/* Musical note animation */
.musical-note{
  position:absolute;
  font-size:24px;
  color:#ffd166;
  pointer-events:none;
  opacity:1;
  transition:all 700ms cubic-bezier(0.34, 1.56, 0.64, 1);
  text-shadow:0 0 8px rgba(255,209,102,0.8), 0 0 16px rgba(255,209,102,0.4);
  font-weight:bold;
  z-index:100;
}

.stats{display:flex;flex-direction:column;gap:8px;flex-shrink:0}

.controls{
  display:flex;
  gap:6px;
  width:100%;
  flex-shrink:0;
}

.controls button{
  flex:1;
  padding:14px 10px;
  border-radius:10px;
  border:0;
  background:linear-gradient(135deg,var(--accent),#5a1adf);
  color:white;
  cursor:pointer;
  box-shadow:0 4px 16px rgba(123,61,242,0.18), 0 1px 0 rgba(255,255,255,0.1) inset;
  font-weight:700;
  font-size:14px;
  min-height:52px;
  transition:all 220ms cubic-bezier(0.34, 1.56, 0.64, 1);
  position:relative;
  overflow:hidden;
  -webkit-tap-highlight-color:transparent;
  touch-action:manipulation;
}

.controls button::before{
  content:'';
  position:absolute;
  top:0;left:-100%;
  width:100%;height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition:left 500ms ease;
  z-index:1;
}

.controls button:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(123,61,242,0.25), 0 1px 0 rgba(255,255,255,0.15) inset;
}

.controls button:active{
  transform:translateY(0) scale(0.98);
  box-shadow:0 2px 8px rgba(123,61,242,0.15);
}

.chat{
  display:flex;
  flex-direction:column;
  gap:6px;
  flex:1;
  min-height:0;
  overflow:hidden;
}

.chat-log{
  flex:1;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:8px;
  padding:8px;
  overflow-y:auto;
  font-size:11px;
  display:flex;
  flex-direction:column;
  gap:4px;
  min-height:0;
  scrollbar-width:none;
  -ms-overflow-style:none;
}

.chat-log::-webkit-scrollbar{
  display:none;
}

.chat-controls{
  display:flex;
  gap:6px;
  width:100%;
  flex-shrink:0;
}

#chatInput{
  flex:1;
  padding:12px;
  border-radius:8px;
  border:0;
  background:rgba(255,255,255,0.03);
  color:inherit;
  font-size:13px;
  min-height:48px;
  font-family:inherit;
  -webkit-appearance:none;
}

#chatBtn{
  padding:12px 16px;
  border-radius:8px;
  border:0;
  background:#2b7df7;
  color:white;
  box-shadow:0 4px 12px rgba(43,125,247,0.12);
  min-height:48px;
  font-size:13px;
  font-weight:700;
  cursor:pointer;
  transition:all 200ms ease;
  -webkit-tap-highlight-color:transparent;
  touch-action:manipulation;
}

#chatBtn:active{
  transform:scale(0.95);
}

/* chat messages */
.msg{
  padding:6px 10px;
  border-radius:8px;
  max-width:90%;
  align-self:flex-start;
  animation:slideIn 300ms ease-out;
  word-wrap:break-word;
  line-height:1.3;
  font-size:11px;
}

@keyframes slideIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

.msg.user{
  background:rgba(255,255,255,0.03);
  align-self:flex-end;
  color:#eaf3ff;
  border:1px solid rgba(174,210,255,0.2);
}

.msg.octo{
  background:linear-gradient(180deg, rgba(123,61,242,0.12), rgba(123,61,242,0.06));
  color:#f0eaff;
  border:1px solid rgba(123,61,242,0.3);
}

.msg.sys{
  color:var(--muted);
  font-size:10px;
  align-self:center;
  font-style:italic;
}

/* fish animation */
.fish-container{position:absolute;top:50%;left:-40px;width:40px;height:20px;opacity:0;pointer-events:none}
.fish{width:100%;height:100%}
.fish-tail{transform-origin:0 0;animation:tailWag 150ms ease-in-out infinite}
@keyframes tailWag{0%,100%{transform:rotate(0deg)}50%{transform:rotate(-8deg)}}

.fish-container.swimming{animation:swimIn 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards}
@keyframes swimIn{0%{left:-40px;opacity:1;transform:translateY(0)}40%{transform:translateY(-30px)}70%{left:calc(50% - 20px);opacity:1;transform:translateY(-25px)}100%{left:calc(50% - 20px);opacity:0;transform:translateY(-25px) scale(0.2)}}

/* confetti */
.confetti{
  position:absolute;
  pointer-events:none;
  border-radius:50%;
  transform:translateY(0);
  opacity:1;
  transition:transform 800ms ease,opacity 800ms ease;
}

footer{
  text-align:center;
  color:var(--muted);
  font-size:8px;
  padding:2px 0;
  margin-top:auto;
  flex-shrink:0;
}

/* tablet and desktop enhancements */
@media (min-width:640px){
  .app{
    max-width:980px;
    margin:0 auto;
    padding:16px;
    gap:12px;
  }

  header h1{font-size:28px}
  .tag{font-size:13px}

  .octopus-container{
    padding:30px;
  }

  .octopus-wrapper{
    max-width:450px;
    max-height:450px;
  }

  .panel{
    width:100%;
    max-width:500px;
    margin:0 auto;
    padding:16px;
    gap:12px;
  }

  .music-section{
    padding:12px 14px;
  }

  .music-header{
    font-size:14px;
  }

  .music-hint{
    font-size:11px;
  }

  .stat .label{font-size:12px}
  .bar{height:11px}
  .stat.small{font-size:12px}

  .controls button{
    font-size:13px;
    padding:12px 10px;
    min-height:50px;
  }

  footer{font-size:10px}

  .ambient-fish{opacity:0.3}
  .ambient-seaweed{opacity:0.15}
  .ambient-particle{opacity:0.2}
}

@media (min-width:768px){
  .app{
    padding:20px;
    overflow:auto;
    max-width:1200px;
    margin:0 auto;
  }
  
  .game{
    flex-direction:row;
    gap:24px;
    align-items:center;
    justify-content:center;
    overflow:visible;
  }

  .octopus-container{
    flex:1;
    max-width:600px;
    min-height:400px;
    padding:40px;
  }

  .octopus-wrapper{
    width:100%;
    height:100%;
    max-width:600px;
    max-height:600px;
  }

  .panel{
    width:400px;
    flex-shrink:0;
    padding:20px;
    gap:16px;
    margin-top:0;
    border-radius:16px;
  }

  .music-section{
    padding:14px 16px;
  }

  .music-header{
    font-size:15px;
  }

  .music-hint{
    font-size:12px;
  }

  .stat .label{font-size:13px}
  .bar{height:12px}
  .stat.small{font-size:13px}

  .controls button{
    font-size:14px;
    padding:14px 12px;
    min-height:52px;
  }

  .ambient-fish{opacity:0.4}
  .ambient-seaweed{opacity:0.2}
  .ambient-particle{opacity:0.3}
}

/* reset button styling */
#resetBtn{
  background:linear-gradient(135deg,#4a5568,#2d3748);
  box-shadow:0 4px 16px rgba(0,0,0,0.2), 0 1px 0 rgba(255,255,255,0.1) inset;
}

#resetBtn:hover{
  background:linear-gradient(135deg,#5a6578,#3d4758);
  box-shadow:0 6px 20px rgba(0,0,0,0.25), 0 1px 0 rgba(255,255,255,0.15) inset;
}
